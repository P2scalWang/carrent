:root {
    --primary: #3b82f6;
    --primary-hover: #2563eb;
    --bg-dark: #0f172a;
    --bg-card: #1e293b;
    --text-main: #f8fafc;
    --text-muted: #94a3b8;
    --border: #334155;
    --accent-fuel: #f59e0b;
    --accent-ev: #10b981;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Outfit', 'Sarabun', sans-serif;
}

body {
    background-color: var(--bg-dark);
    color: var(--text-main);
    overflow: hidden;
    /* App-like feel */
}

/* Layout */
.app-container {
    display: flex;
    height: 100vh;
}

.sidebar {
    width: 260px;
    background: var(--bg-card);
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    padding: 1.5rem;
}

.main-content {
    flex: 1;
    overflow-y: auto;
    padding: 2rem;
    background: radial-gradient(circle at top right, #1e293b 0%, #0f172a 100%);
}

/* Sidebar Elements */
.logo {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 3rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    color: var(--primary);
}

/* Sidebar nav optimization moved to bottom */

.sidebar nav a:hover,
.sidebar nav a.active {
    background: rgba(59, 130, 246, 0.1);
    color: var(--primary);
}

.user-profile {
    margin-top: auto;
    display: flex;
    align-items: center;
    gap: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border);
}

.avatar {
    width: 40px;
    height: 40px;
    background: var(--primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
}

.user-profile .info {
    display: flex;
    flex-direction: column;
}

.user-profile .name {
    font-weight: 600;
    font-size: 0.9rem;
}

.user-profile .role {
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* Header */
header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.actions {
    display: flex;
    gap: 1.5rem;
    align-items: center;
}

.date-selector {
    display: flex;
    align-items: center;
    gap: 1rem;
    background: var(--bg-card);
    padding: 0.5rem 1rem;
    border-radius: 30px;
    border: 1px solid var(--border);
}

.date-selector button {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 1rem;
}

.date-selector button:hover {
    color: var(--text-main);
}

/* Stats Grid */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-bottom: 2rem;
}

/* Stat card optimization moved to bottom */

.stat-card .icon {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
}

.stat-card .icon.blue {
    background: rgba(59, 130, 246, 0.2);
    color: var(--primary);
}

.stat-card .icon.green {
    background: rgba(16, 185, 129, 0.2);
    color: var(--accent-ev);
}

.stat-card .icon.amber {
    background: rgba(245, 158, 11, 0.2);
    color: var(--accent-fuel);
}

.stat-card h3 {
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-bottom: 0.25rem;
}

.stat-card span {
    font-size: 1.8rem;
    font-weight: 700;
}

/* Timeline */
/* Glass panel optimization moved to bottom */

.timeline-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.legend .item {
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-left: 1rem;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: block;
}

.dot.fuel {
    background: var(--accent-fuel);
    box-shadow: 0 0 10px rgba(245, 158, 11, 0.4);
}

.dot.ev {
    background: var(--accent-ev);
    box-shadow: 0 0 10px rgba(16, 185, 129, 0.4);
}

.timeline-scroll-wrapper {
    overflow-x: auto;
    padding-bottom: 1rem;
}

.calendar-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 800px;
}

.calendar-table th,
.calendar-table td {
    padding: 1rem;
    border: 1px solid var(--border);
    text-align: center;
    position: relative;
}

.calendar-table th {
    background: rgba(15, 23, 42, 0.8);
    position: sticky;
    top: 0;
    z-index: 10;
}

.car-cell {
    text-align: left;
    display: flex;
    flex-direction: column;
    min-width: 180px;
}

.car-model {
    font-weight: 600;
    color: var(--text-main);
}

.car-plate {
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* Booking Bars */
.booking-bar {
    position: absolute;
    top: 10px;
    bottom: 10px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    padding: 0 0.5rem;
    font-size: 0.75rem;
    color: white;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    cursor: pointer;
    transition: transform 0.2s;
    z-index: 1;
}

.booking-bar:hover {
    transform: scale(1.02);
    z-index: 20;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.booking-bar.user-me {
    background: linear-gradient(90deg, #3b82f6, #60a5fa);
}

.booking-bar.user-other {
    background: linear-gradient(90deg, #64748b, #94a3b8);
}

/* Buttons */
.btn-primary {
    background: var(--primary);
    color: white;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.btn-primary:hover {
    background: var(--primary-hover);
    box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
}

.btn-text {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 0.75rem;
    font-weight: 500;
}

.btn-text:hover {
    color: var(--text-main);
}

/* Modal */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(5px);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
    z-index: 1000;
}

.modal.open {
    opacity: 1;
    pointer-events: all;
}

.modal-content {
    width: 500px;
    background: #1e293b;
    border: 1px solid var(--border);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
    transform: translateY(20px);
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.modal.open .modal-content {
    transform: translateY(0);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
}

.close-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1.2rem;
    cursor: pointer;
}

/* Forms */
.form-group {
    margin-bottom: 1.25rem;
}

/* Sidebar Navigation optimization */
.sidebar nav a {
    display: flex;
    align-items: center;
    gap: 1rem;
    color: var(--text-muted);
    text-decoration: none;
    padding: 1rem;
    border-radius: 12px;
    transition: background-color 0.2s ease, color 0.2s ease;
    /* Specific properties */
    margin-bottom: 0.5rem;
}

/* Stats Card optimization */
.stat-card {
    background: rgba(30, 41, 59, 0.85);
    /* Slightly more opaque -> less blending cost */
    /* backdrop-filter: blur(10px); Removed for performance testing, user says it lags.
       If we want to keep it, we need to be careful.
       Let's keep it but ensure no animation triggers repaint.
       Actually, standard glass on static items is fine.
       The issue is likely the Section Swap animation.
    */
    backdrop-filter: blur(8px);
    /* Reduced blue radius */
    border: 1px solid var(--border);
    padding: 1.5rem;
    border-radius: 16px;
    display: flex;
    align-items: center;
    gap: 1.5rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

/* Glass Panel optimization */
.glass-panel {
    background: rgba(30, 41, 59, 0.75);
    backdrop-filter: blur(10px);
    /* Reduced from 12px */
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 1.5rem;
    overflow: hidden;
    /* Force GPU layer */
    transform: translateZ(0);
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

label {
    display: block;
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
    color: var(--text-muted);
}

input,
select {
    width: 100%;
    padding: 0.75rem;
    background: #0f172a;
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-main);
    outline: none;
}

/* Custom Date Input Styling removed to fix mobile overlap */
input[type="date"] {
    position: relative;
    color: var(--text-main);
    /* Ensure native appearance for reliability */
    appearance: none;
    -webkit-appearance: none;
    background: #0f172a;
    min-height: 44px;
    /* Touch target size */
}

/* 
input[type="date"]::-webkit-datetime-edit { color: transparent; }
input[type="date"]::before { ... } 
REMOVED due to iOS Double Text Issue 
*/

input:focus,
select:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

/* Sections */
/* Simplified FadeIn - Opacity Only (Cheaper than transform) */
.content-section {
    display: none;
    animation: fadeIn 0.4s ease-out;
    /* Slightly longer but smoother curve */
    will-change: opacity;
}

.content-section.active {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        /* transform: translateY(10px); REMOVED: Moving blurred elements is expensive */
    }

    to {
        opacity: 1;
        /* transform: translateY(0); */
    }
}

/* Data Table (Bookings View) */
.table-container {
    overflow-x: auto;
}

.data-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
}

.data-table th,
.data-table td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid var(--border);
}

.data-table th {
    color: var(--text-muted);
    font-weight: 500;
    text-transform: uppercase;
    font-size: 0.85rem;
}

.data-table tr:hover td {
    background: rgba(255, 255, 255, 0.02);
}

/* ... existing code ... */

.data-table td {
    color: var(--text-main);
}

/* Utilities for Responsive */
.mobile-only {
    display: none;
}

.desktop-only {
    display: block;
}

/* Mobile Responsive Styles */
@media (max-width: 768px) {

    /* Layout Adjustments */
    .app-container {
        flex-direction: column;
        height: auto;
        overflow-x: hidden;
    }

    .sidebar {
        display: none;
        /* Hide Sidebar on Mobile */
    }

    .main-content {
        padding: 1rem;
        height: 100vh;
        /* Full height */
    }

    /* Header Adjustments */
    header {
        flex-direction: row;
        justify-content: space-between;
        margin-bottom: 1.5rem;
    }

    /* Hide complex desktop elements */
    .desktop-only {
        display: none !important;
    }

    .mobile-only {
        display: block !important;
    }

    /* Adjust Stats Grid */
    .stats-grid {
        grid-template-columns: 1fr 1fr;
        /* 2 cols */
        gap: 1rem;
    }

    .stat-card:last-child {
        grid-column: span 2;
        /* Make last card full width */
    }

    /* Mobile Booking History List Styles */
    .history-item {
        background: #1e293b;
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 1rem;
        margin-bottom: 0.75rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .h-date {
        font-weight: 600;
        font-size: 1rem;
        margin-bottom: 4px;
    }

    .h-car {
        font-size: 0.85rem;
        color: var(--text-muted);
    }

    .h-status {
        font-size: 0.75rem;
        padding: 2px 8px;
        border-radius: 4px;
    }

    /* Modal - Make it feel like a full page on mobile */
    .modal {
        align-items: flex-end;
        /* Slide up from bottom */
    }

    .modal-content {
        width: 100%;
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
        margin: 0;
        max-height: 90vh;
        overflow-y: auto;
    }

    /* Bigger Buttons for Touch */
    .btn-primary {
        padding: 1rem;
        width: 100%;
        justify-content: center;
        font-size: 1.1rem;
    }

    /* Booking Button on Dashboard */
    header .btn-primary {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: auto;
        border-radius: 50px;
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.5);
        z-index: 100;
        padding: 1rem 1.5rem;
    }

    header h1 {
        font-size: 1.5rem;
    }

    .date-selector {
        display: none;
        /* Hide date selector on mobile dashboard for simplicity */
    }
}
